# kube-prometheus-stack values rendered by Ansible
# Variables from playbook:
# - enable_ingress
# - ingress_class_name
# - grafana_domain, prometheus_domain, alertmanager_domain
# - grafana_admin_user, grafana_admin_password
# - grafana_pvc_size
# - release_name_kps (used by ServiceMonitor labels elsewhere)
# - logging_namespace (for Loki URL)

# Grafana configuration
grafana:
  adminUser: "admin"
  adminPassword: "ChangeMe_SuperSecret"
  ingress:
    enabled: True
    ingressClassName: "nginx"
    hosts:
      - "grafana.example.com"
    path: "/grafana"
    pathType: ImplementationSpecific
  persistence:
    enabled: true
    size: 5Gi
  # Add Loki as a datasource
  additionalDataSources:
    - name: Loki
      type: loki
      access: proxy
      url: http://loki.logging.svc.cluster.local:3100
      isDefault: false

# Prometheus Server Ingress
prometheus:
  ingress:
    enabled: True
    ingressClassName: "nginx"
    hosts:
      - "prometheus.example.com"
    paths:
      - "/prometheus"
    pathType: ImplementationSpecific

# Alertmanager Ingress
alertmanager:
  ingress:
    enabled: True
    ingressClassName: "nginx"
    hosts:
      - "alertmanager.example.com"
    paths:
      - "/alertmanager"
    pathType: ImplementationSpecific

# Keep default exporters and kube components enabled
kubeStateMetrics:
  enabled: true
nodeExporter:
  enabled: true
